import streamlit as st
from helpers.ui_components import section_header

# ==============================
# ๐ฏ ุจูุงูุงุช ุงูุชูุตูุงุช ุงูุฐููุฉ ูุน ุตูุฑ ูุตุบุฑุฉ ูุฑูุงุจุท
# ==============================
def get_recommendations_data():
    return {
        "ุงูุนูุงู": [
            {"ุงูุนููุงู": "ุงุญุณุจ ููุงูุฃุฉ ููุงูุฉ ุงูุฎุฏูุฉ", "ุงููุตู": "ุงุณุชุฎุฏู ุงูุญุงุณุจุฉ ูุชูุฏูุฑ ูุณุชุญูุงุชู.", "ุงูููุน": "ุญุงุณุจุฉ", "link": "#", "icon": "๐งฎ", "img": "assets/icons/service_end.png"},
            {"ุงูุนููุงู": "ุฑุงุฌุน ุญูููู ุงูุฃุณุงุณูุฉ", "ุงููุตู": "ุชุนุฑู ุนูู ุญูููู ููู ุงููุงููู ุงูุฃุฑุฏูู.", "ุงูููุน": "ุชูุนูุฉ", "link": "#", "icon": "๐", "img": "assets/icons/rights.png"},
            {"ุงูุนููุงู": "ุงุทูุน ุนูู ุณูุงุจู ูุถุงุฆูุฉ", "ุงููุตู": "ุฃุญูุงู ูุดุงุจูุฉ ูุญุงูุชู.", "ุงูููุน": "ูุงูููู", "link": "#", "icon": "โ๏ธ", "img": "assets/icons/legal_case.png"},
            {"ุงูุนููุงู": "ุชุทุจููุงุช ุนูููุฉ", "ุงููุตู": "ุฃูุซูุฉ ุชุทุจูููุฉ ููููุงุฏ ุงููุงููููุฉ.", "ุงูููุน": "ุชุนูููู", "link": "#", "icon": "๐ก", "img": "assets/icons/practice.png"}
        ],
        "ุงุตุญุงุจ ุงูุนูู": [
            {"ุงูุนููุงู": "ุชุญูู ูู ุงูุชุซุงูู ุงููุงูููู", "ุงููุตู": "ุชุฃูุฏ ูู ุงูุชุฒุงูุงุชู ูุตุงุญุจ ุนูู.", "ุงูููุน": "ุงูุชุซุงู", "link": "#", "icon": "โ", "img": "assets/icons/compliance.png"},
            {"ุงูุนููุงู": "ุงุญุณุจ ุชูููุฉ ุงูููุธู", "ุงููุตู": "ุงุญุณุจ ุงูุชูููุฉ ุงูุดุงููุฉ.", "ุงูููุน": "ูุงูู", "link": "#", "icon": "๐ฐ", "img": "assets/icons/cost.png"},
            {"ุงูุนููุงู": "ุงุนุฑู ุฅุฌุฑุงุกุงุช ุงููุตู", "ุงููุตู": "ุงูุฎุทูุงุช ุงููุงููููุฉ ูููุตู ุงููุดุฑูุน.", "ุงูููุน": "ูุงูููู", "link": "#", "icon": "โ๏ธ", "img": "assets/icons/legal_case.png"},
            {"ุงูุนููุงู": "ูุตุงุฆุญ ุฅุฏุงุฑุฉ ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ", "ุงููุตู": "ุงุณุชุฑุงุชูุฌูุงุช ูุฃูุซูุฉ ูุงุฌุญุฉ.", "ุงูููุน": "ุชูุนูุฉ", "link": "#", "icon": "๐", "img": "assets/icons/hr.png"}
        ],
        "ููุชุดู ุงูุนูู": [
            {"ุงูุนููุงู": "ุฏููู ุงูุชูุชูุด", "ุงููุตู": "ุฅุฌุฑุงุกุงุช ุงูุชูุชูุด ููุฑุงุญูู.", "ุงูููุน": "ูุฑุฌุน", "link": "#", "icon": "๐", "img": "assets/icons/inspection.png"},
            {"ุงูุนููุงู": "ููุงุฐุฌ ุชูุงุฑูุฑ", "ุงููุตู": "ููุงุฐุฌ ุชูุชูุด ุฌุงูุฒุฉ.", "ุงูููุน": "ูููุฐุฌ", "link": "#", "icon": "๐", "img": "assets/icons/report.png"},
            {"ุงูุนููุงู": "ุชุญุฏูุซุงุช ุงูููุงููู", "ุงููุตู": "ุขุฎุฑ ุงูุชุนุฏููุงุช ูุงูุชุนูููุงุช.", "ุงูููุน": "ูุฑุฌุน", "link": "#", "icon": "๐", "img": "assets/icons/updates.png"}
        ],
        "ุงูุจุงุญุซูู ูุงููุชุฏุฑุจูู": [
            {"ุงูุนููุงู": "ุชุญููู ุงูุชุนุฏููุงุช ุงููุงููููุฉ", "ุงููุตู": "ูุงุฑู ุงููุตูุต ูุจู ูุจุนุฏ ุงูุชุนุฏูู.", "ุงูููุน": "ุจุญุซ", "link": "#", "icon": "๐", "img": "assets/icons/research.png"},
            {"ุงูุนููุงู": "ุงุฎุชุจุงุฑ ูุนุฑูุชู", "ุงููุตู": "ุงุฎุชุจุงุฑุงุช ูุงููููุฉ ุชูุงุนููุฉ.", "ุงูููุน": "ุชุนูููู", "link": "#", "icon": "๐งฉ", "img": "assets/icons/quiz.png"},
            {"ุงูุนููุงู": "ูุฑุงุฌุน ุฃูุงุฏูููุฉ", "ุงููุตู": "ููุงูุงุช ูุฃุจุญุงุซ ูุงููููุฉ.", "ุงูููุน": "ุจุญุซ", "link": "#", "icon": "๐", "img": "assets/icons/academic.png"}
        ]
    }

# ==============================
# ๐ก ุนุฑุถ ุงูุจุทุงูุงุช ุงูุชูุงุนููุฉ ุจุฃุณููุจ Grid ูุชุญุฑู
# ==============================
def smart_recommender(role_label="ุงูุนูุงู", n=6):
    recommendations = get_recommendations_data().get(role_label, [])
    if not recommendations:
        st.warning("โ๏ธ ูุง ุชูุฌุฏ ุชูุตูุงุช ุญุงููุงู.")
        return

    section_header("๐ก ุงูุชุฑุงุญุงุช ุฐููุฉ ูู", "๐ก")

    # ุฅูุดุงุก Grid ุฏููุงูููู (3 ุฃุนูุฏุฉ)
    cols = st.columns(3)
    type_styles = {
        "ุญุงุณุจุฉ": "linear-gradient(135deg, #FFD700, #FFA500)",
        "ุชูุนูุฉ": "linear-gradient(135deg, #00BFFF, #1E90FF)",
        "ูุงูููู": "linear-gradient(135deg, #FF4500, #FF6347)",
        "ุชุนูููู": "linear-gradient(135deg, #32CD32, #7CFC00)",
        "ุงูุชุซุงู": "linear-gradient(135deg, #8A2BE2, #9400D3)",
        "ูุงูู": "linear-gradient(135deg, #FF69B4, #FF1493)",
        "ูุฑุฌุน": "linear-gradient(135deg, #20B2AA, #3CB371)",
        "ูููุฐุฌ": "linear-gradient(135deg, #FFA500, #FF8C00)",
        "ุจุญุซ": "linear-gradient(135deg, #7FFF00, #32CD32)"
    }

    for idx, rec in enumerate(recommendations[:n]):
        with cols[idx % len(cols)]:
            style = type_styles.get(rec['ุงูููุน'], "#D3D3D3")
            html_card = f"""
            <div style="
                background: {style};
                border-radius:15px;
                padding:15px;
                margin:5px;
                box-shadow: 2px 4px 15px rgba(0,0,0,0.2);
                transition: transform 0.3s, box-shadow 0.3s;
                text-align:center;
            ">
                <img src='{rec['img']}' alt='icon' width='50px' style='margin-bottom:10px;'/>
                <h4>{rec['icon']} {rec['ุงูุนููุงู']}</h4>
                <p style='font-size:14px; margin:5px 0;'>{rec['ุงููุตู']}</p>
                <a href='{rec['link']}' target='_blank' style='color:#fff; text-decoration:underline;'>ุงุถุบุท ููุง ููุชูุงุตูู</a>
            </div>
            """
            st.markdown(html_card, unsafe_allow_html=True)